!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self)["peng-utils"]=t()}(this,(function(){"use strict";function e(e){return new Promise((t=>{const n=new Image;n.src=e,n.onload=function(){t({src:e,w:this.width,h:this.height})},n.onerror=()=>t({src:e,w:1,h:1})}))}let t;function n(e=(()=>{}),t=300){let n,o=!0;return function(...r){if(o)return o=!1,e.call(this,...r);if(n)return;n=setTimeout((()=>{e.call(this,...r),n=null}),t)}}var o={throttle:n,debounce:function(e=(()=>{}),t=300){let n;return function(...o){n&&clearTimeout(n),n=setTimeout((()=>{e.call(this,...o),n=null}),t)}}};return{validate:{isPhone:e=>/^1\d{10}$/.test(e)},deepClone:function e(t){let n;if(null===t||"object"!=typeof t)return t;if(t instanceof Date)return n=new Date,n.setTime(t.getTime()),n;if(t instanceof Array){n=[];for(let o=0,r=t.length;o<r;o++)n[o]=e(t[o]);return n}if(t instanceof Object){n={};for(const l in t)Object.prototype.hasOwnProperty.call(t,l)&&(o=n,r=l,i=e(t[l]),o[r]=i);return n}var o,r,i;throw new Error("deep clone isn't supported.")},getImage:async t=>{if("string"==typeof t){return[await e(t)]}return Promise.all(t.map((t=>"string"==typeof t?e(t):t.w?t:e(t.src))))},getTextHeight:(e,n=5)=>{t||(t=document.createElement("div"),t.setAttribute("aria-hidden","true"),document.body.appendChild(t));let o=e.cloneNode(!0);t.appendChild(o);const r=window.getComputedStyle(e),i=(l=r,Array.prototype.slice.apply(l).map((e=>`${e}: ${l.getPropertyValue(e)};`)).join(""));var l;const s=function(e){if(!e)return 0;const t=e.match(/^\d*(\.\d*)?/);return t?Number(t[0]):0}(r.lineHeight);t.setAttribute("style",i),t.style.position="fixed",t.style.top="-999px",t.style.left="-999px",t.style.display="block",t.style.oveflow="visible",t.style.textOverflow="clip",t.style.webkitLineClamp="none";const c=Math.round(s*n),u=o.offsetHeight;return t.removeChild(o),u>c},loadMore:class{constructor(e=(()=>{}),t=(()=>{}),o=300){this.loadMoreFn=n((()=>{const n=document.documentElement,o=document.body,r=n.clientHeight||o.clientHeight,i=n.scrollTop||o.scrollTop,l=o.scrollHeight||n.scrollHeight;t(i),i+r>=l-80&&e()}),o),window.addEventListener("scroll",this.loadMoreFn,{passive:!1})}destroy(){this.loadMoreFn&&(window.removeEventListener("scroll",this.loadMoreFn),this.loadMoreFn=null)}},throttleDebounce:o}}));
