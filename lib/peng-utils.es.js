function e(e){return new Promise((t=>{const o=new Image;o.src=e,o.onload=function(){t({src:e,w:this.width,h:this.height})},o.onerror=()=>t({src:e,w:1,h:1})}))}let t;function o(e=(()=>{}),t=300){let o,n=!0;return function(...r){if(n)return n=!1,e.call(this,...r);if(o)return;o=setTimeout((()=>{e.call(this,...r),o=null}),t)}}var n={throttle:o,debounce:function(e=(()=>{}),t=300){let o;return function(...n){o&&clearTimeout(o),o=setTimeout((()=>{e.call(this,...n),o=null}),t)}}};var r={validate:{isPhone:e=>/^1\d{10}$/.test(e)},deepClone:function e(t){let o;if(null===t||"object"!=typeof t)return t;if(t instanceof Date)return o=new Date,o.setTime(t.getTime()),o;if(t instanceof Array){o=[];for(let n=0,r=t.length;n<r;n++)o[n]=e(t[n]);return o}if(t instanceof Object){o={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n=o,r=i,l=e(t[i]),n[r]=l);return o}var n,r,l;throw new Error("deep clone isn't supported.")},getImage:async t=>{if("string"==typeof t){return[await e(t)]}return Promise.all(t.map((t=>"string"==typeof t?e(t):t.w?t:e(t.src))))},getTextHeight:(e,o=5)=>{t||(t=document.createElement("div"),t.setAttribute("aria-hidden","true"),document.body.appendChild(t));let n=e.cloneNode(!0);t.appendChild(n);const r=window.getComputedStyle(e),l=(i=r,Array.prototype.slice.apply(i).map((e=>`${e}: ${i.getPropertyValue(e)};`)).join(""));var i;const s=function(e){if(!e)return 0;const t=e.match(/^\d*(\.\d*)?/);return t?Number(t[0]):0}(r.lineHeight);t.setAttribute("style",l),t.style.position="fixed",t.style.top="-999px",t.style.left="-999px",t.style.display="block",t.style.oveflow="visible",t.style.textOverflow="clip",t.style.webkitLineClamp="none";const c=Math.round(s*o),a=n.offsetHeight;return t.removeChild(n),a>c},loadMore:class{constructor(e=(()=>{}),t=(()=>{}),n=300){this.loadMoreFn=o((()=>{const o=document.documentElement,n=document.body,r=o.clientHeight||n.clientHeight,l=o.scrollTop||n.scrollTop,i=n.scrollHeight||o.scrollHeight;t(l),l+r>=i-80&&e()}),n),window.addEventListener("scroll",this.loadMoreFn,{passive:!1})}destroy(){this.loadMoreFn&&(window.removeEventListener("scroll",this.loadMoreFn),this.loadMoreFn=null)}},throttleDebounce:n};export default r;
